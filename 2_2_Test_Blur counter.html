<!DOCTYPE html>
<html>
<body>
<script>
    
// Counter for the number of times that participants leave the study page
    
// Declaring variables for counting up the number of times participants blur a study page, 
// how long participants left study page overall and a start and end timestamp variable
let counterBlur = 0;
let secondsOutsideWindow = 0;
let startSecondsOutsideWindow = 0;
let endSecondsOutsideWindow = 0;

//Delete next three lines when not testing
let element = document.createElement('div');
element.textContent = "Please click on on this page to start the blur counter. After your first click, just leave the page, come back and the counter will display here.";
document.body.appendChild(element);

// Send your initial values to your survey tool database here

// Insert JavaScript code  canceling cut, copy, paste commands here

// EventListener counting variable counterPageLeave if webpage is blurred
window.addEventListener("blur", (event) => {
    counterPageLeave = counterPageLeave + 1;
    
    // Implement the handler for variable counterPageLeave right here
    
    // Takes unix timestamp in seconds for blurring of study page
    startSecondsOutsideWindow = Math.floor(Date.now() / 1000);
});

// EventListener that calculates participants’ time outside the study’s page when participants refocus study page
window.addEventListener("focus", (event) => {
    
    // Takes unix timestamp in seconds for focus of study page
    endSecondsOutsideWindow = Math.floor(Date.now() / 1000);
   
    // Calculates time difference between leaving and refocus
    if (counterPageLeave > 0) {
        secondsOutsideWindow = secondsOutsideWindow +    endSecondsOutsideWindow - startSecondsOutsideWindow;
    }
    if (counterPageLeave === 0) {
        secondsOutsideWindow = 0;
    }
    
    // Implement the handler for variable secondsOutsideWindow right here

    // Displays information for testing, please delete this line and the following lines until document.body.appendChild(element); when not testing
    let element2 = document.createElement('div');
    element2.textContent = "Number of times you left the page: " + counterPageLeave + "; " + "number of seconds you have been outside the page: " + secondsOutsideWindow;
    document.body.appendChild(element2);
    // Delete until here if not testing

});

</script> 

</body> 
</html>
